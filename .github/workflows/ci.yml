name: CI

on: [push, pull_request]

jobs:
  test-and-coverage:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v2

      - name: Install dependencies
        run: npm ci

      - name: Run Jest tests with coverage
        run: npm test -- --coverage

      # Jest 커버리지 리포트를 PR에 코멘트로 남기는 액션 추가
      - name: Jest Coverage Report
        uses: ArtiomTr/jest-coverage-report-action@v2
        with:
          github-token: ${{ secrets.GITHUB_TOKEN }}
          msg: 'Jest 테스트 완료! 세부 사항은 체크 결과를 확인해주세요.'
          # 필요한 추가 입력 옵션을 여기에 포함합니다.
      - run: echo '${{github.actor}}님! 고생하셨습니다! 🍻'
