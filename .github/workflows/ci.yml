name: CI

on: [push, pull_request]

jobs:
  test-and-coverage:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v2

      - name: Install dependencies
        run: npm ci

      - name: Run Jest tests with coverage
        run: npm test -- --coverage

      # Jest ì»¤ë²„ë¦¬ì§€ ë¦¬í¬íŠ¸ë¥¼ PRì— ì½”ë©˜íŠ¸ë¡œ ë‚¨ê¸°ëŠ” ì•¡ì…˜ ì¶”ê°€
      - name: Jest Coverage Report
        uses: ArtiomTr/jest-coverage-report-action@v2
        with:
          github-token: ${{ secrets.GITHUB_TOKEN }}
          msg: 'Jest í…ŒìŠ¤íŠ¸ ì™„ë£Œ! ì„¸ë¶€ ì‚¬í•­ì€ ì²´í¬ ê²°ê³¼ë¥¼ í™•ì¸í•´ì£¼ì„¸ìš”.'
          # í•„ìš”í•œ ì¶”ê°€ ì…ë ¥ ì˜µì…˜ì„ ì—¬ê¸°ì— í¬í•¨í•©ë‹ˆë‹¤.
      - run: echo '${{github.actor}}ë‹˜! ê³ ìƒí•˜ì…¨ìŠµë‹ˆë‹¤! ğŸ»'
